package de.tyrannus.venomhack.modules.exploit;

import de.tyrannus.venomhack.modules.Module;
import de.tyrannus.venomhack.settings.Setting;
import net.minecraft.item.BlockItem;
import net.minecraft.item.EndCrystalItem;
import net.minecraft.item.ExperienceBottleItem;

public class FastUse extends Module {
   public final Setting<Integer> cooldown = this.setting("cooldown", "Use cooldown in ticks. 4 is vanilla.", Integer.valueOf(0), 0.0F, 10.0F);
   public final Setting<Integer> multiplier = this.setting("use-multiplier", "How many uses to perform each click.", Integer.valueOf(1), 1.0F, 10.0F);
   private final Setting<Boolean> filter = this.setting("filter", "Will only work when holding specified items.", Boolean.valueOf(false));
   private final Setting<Boolean> xp = this.setting("xp", "Will work when holding xp.", Boolean.valueOf(true), this.filter::get);
   private final Setting<Boolean> blocks = this.setting("blocks", "Will work when holding blocks.", Boolean.valueOf(false), this.filter::get);
   private final Setting<Boolean> crystals = this.setting("crystal", "Will work when holding crystals.", Boolean.valueOf(true), this.filter::get);

   public FastUse() {
      super(Module.Categories.EXPLOIT, "fast-use", "Allows you to use items with specified cooldown.");
   }

   public boolean isHolding() {
      if (!this.filter.get()) {
         return true;
      } else {
         return this.xp.get() && this.holds(ExperienceBottleItem.class)
            || this.blocks.get() && this.holds(BlockItem.class)
            || this.crystals.get() && this.holds(EndCrystalItem.class);
      }
   }

   private boolean holds(Class<?> item) {
      return item.isInstance(mc.player.getMainHandStack().getItem()) || item.isInstance(mc.player.getOffHandStack().getItem());
   }
}
